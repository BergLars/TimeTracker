<div class="layout-column">
    <md-toolbar>
        <button md-raised-button color="primary" (click)="openDialog(row)">NEW ENTRY</button>
        <i (click)="loadEntries()" class="material-icons">update</i>
        <span class="flex"></span>
        <span color="primary">
        <select (change)="changeRowLimits($event)">
            <option *ngFor="let limit of rowLimits" [value]="limit.value">{{limit.key}}</option>
        </select>
        </span>
    </md-toolbar>
</div>
<ngx-datatable class="material" 
[rows]="items" 
[columnMode]="'force'" 
[columns]="columns" 
[headerHeight]="50" 
[footerHeight]="50" 
[rowHeight]="'auto'" 
[selected]="selected" 
[selectionType]="'single'" 
[limit]="limit"
(select)='onSelect($event)'>
    <ngx-datatable-column name="Description">
        <ng-template ngx-datatable-cell-template let-row="row">
            <!--  <span title="Double click to edit" (dblclick)="editing[row.$$index + '-description'] = true" *ngIf="!editing[row.$$index + '-description']">{{ row.description }}</span>
            <input autofocus (blur)="updateValue($event, 'description', value, row)" *ngIf="editing[row.$$index + '-description']" type="text" [value]="value" /> -->
            <div>
                {{ row.description }}
            </div>
        </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="Project">
        <ng-template ngx-datatable-cell-template let-row="row">
            <!--  <span title="Double click to edit" (dblclick)="editing[row.$$index + '-project'] = true" *ngIf="!editing[row.$$index + '-project']">
              {{ row.projectName() }}
            </span>
            <select *ngIf="editing[row.$$index + '-project']" (change)="updateValue($event, 'project', value, row)" [value]="value">
                <option *ngFor="let project of projects" [ngValue]="project">{{ project.projectName }}</option>
            </select> -->
            <div>
                {{ row.projectName }}
            </div>
        </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="Task">
        <ng-template ngx-datatable-cell-template let-value="value" let-row="row">
            <!--  <span title="Double click to edit" (dblclick)="editing[row.$$index + '-task'] = true" *ngIf="!editing[row.$$index + '-task']">
              {{ row.taskDescription() }}
            </span>
            <select *ngIf="editing[row.$$index + '-task']" (change)="updateValue($event, 'task', value, row)" [value]="value">
                <option *ngFor="let task of tasks" [ngValue]="task">{{ task.taskDescription }}</option>
            </select> -->
            <div>
                {{ row.taskDescription }}
            </div>
        </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="Date">
        <ng-template ngx-datatable-cell-template let-value="value" let-row="row">
            <!-- <span title="Double click to edit" (dblclick)="editing[row.$$index + '-date()'] = true" *ngIf="!editing[row.$$index + '-date()']">
                {{ row.date() }}</span>
            <input autofocus (blur)="updateValue($event, 'description', value, row)" *ngIf="editing[row.$$index + '-date()']" type="datetime-local" [value]="value" /> -->
            <div>
                {{ row.date() }}
            </div>
        </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="Start time">
        <ng-template ngx-datatable-cell-template let-value="value" let-row="row">
            <!-- <span title="Double click to edit" (dblclick)="editing[row.$$index + '-startTime()'] = true" *ngIf="!editing[row.$$index + '-startTime()']">
                {{ row.startTime()}}</span>
            <input autofocus (blur)="updateValue($event, 'startTime()', value, row)" *ngIf="editing[row.$$index + '-startTime()']" type="datetime-local" [value]="value" /> -->
            <div>
                {{ row.startTime() }}
            </div>
        </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="End time">
        <ng-template ngx-datatable-cell-template let-value="value" let-row="row">
            <!--  <span title="Double click to edit" (dblclick)="editing[row.$$index + '-endTime()'] = true" *ngIf="!editing[row.$$index + '-endTime()']">
                {{ row.endTime() }}</span>
            <input autofocus (blur)="updateValue($event, 'endTime()', value, row)" *ngIf="editing[row.$$index + '-endTime()']" type="datetime-local" [value]="value" /> -->
            <div>
                {{ row.endTime() }}
            </div>
        </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="Time spend">
        <ng-template ngx-datatable-cell-template let-value="value" let-row="row">
            <div>
                {{ row.timeSpent() }}
            </div>
        </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="Actions">
        <ng-template ngx-datatable-cell-template let-value="value" let-row="row">
            <div [hidden]="!isSelected(row)">
                <div [hidden]="editMode">
                    <span (click)=openUpdateDialog(row);><md-icon>update</md-icon></span>
                    <span (click)="openDeleteDialog(row)"><md-icon>delete_forever</md-icon></span>
                </div>
                <!-- <div [hidden]="!editMode">
                    <span><md-icon>check</md-icon></span>
                    <span (click)=discardChange()><md-icon>cancel</md-icon></span>
                </div> -->
            </div>
        </ng-template>
    </ngx-datatable-column>
</ngx-datatable>
